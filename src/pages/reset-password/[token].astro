---
import AuthLayout from '../../layouts/AuthLayout.astro';
import { ResetPasswordForm } from '../../components/auth/ResetPasswordForm';

// Pobierz token z URL
const { token } = Astro.params;

// Sprawdź czy token istnieje, jeśli nie - wyświetl błąd
const tokenExists = !!token;
---

<AuthLayout title="10xFlashcards - Reset hasła">
  <div class="auth-container">
    <h1 class="text-3xl font-bold mb-6 text-center bg-gradient-to-r from-primary via-secondary-400 to-accent-200 text-transparent bg-clip-text">
      Reset hasła
    </h1>
    
    <div class="w-full bg-gray-900/50 rounded-lg p-6 shadow-lg border border-gray-800">
      {tokenExists ? (
        <ResetPasswordForm token={token} client:load />
      ) : (
        <div class="bg-red-950/50 border border-red-500/50 text-red-200 px-4 py-3 rounded-md">
          <h3 class="font-medium text-lg mb-2">Nieprawidłowy link</h3>
          <p class="mb-4">Ten link resetowania hasła jest nieprawidłowy lub wygasł.</p>
          <a 
            href="/forgot-password" 
            class="inline-block w-full py-2 px-4 text-center rounded-md font-medium transition-all bg-gradient-to-r from-primary via-secondary-400 to-accent-200 hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-primary/50 text-white shadow-md"
          >
            Wygeneruj nowy link
          </a>
        </div>
      )}
    </div>
  </div>
</AuthLayout>

<style>
  .auth-container {
    width: 100%;
    max-width: 450px;
    margin: 0 auto;
  }
</style>
