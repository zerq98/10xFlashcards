---
import Layout from '../../layouts/Layout.astro';
import { TopicList } from '../../components/dashboard/TopicList';
import { NewTopicButton } from '../../components/dashboard/NewTopicButton';
import { loadSession } from '@/middleware';

// Ochrona tej strony - tylko dla zalogowanych użytkowników
export const prerender = false;
export const onRequest = loadSession;
---

<Layout>
  <div class="min-h-screen bg-background text-text">
    <div class="container mx-auto px-4 py-8">
      <div class="mb-8 flex items-center justify-between">
        <h1 class="text-3xl font-bold bg-gradient-to-r from-primary via-secondary-400 to-accent-200 bg-clip-text text-transparent">Twoje Tematy</h1>
        <NewTopicButton client:load />
      </div>
      <TopicList client:load />
    </div>
  </div>
</Layout>